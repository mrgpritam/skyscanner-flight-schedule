{"ast":null,"code":"var _jsxFileName = \"/Users/pritam/Desktop/my-app/node_modules/@skyscanner/backpack-web/bpk-component-input/src/withOpenEvents.js\";\n/*\n * Backpack - Skyscanner's Design System\n *\n * Copyright 2016 Skyscanner Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { cssModules, wrapDisplayName } from '../../bpk-react-utils';\nimport STYLES from './BpkInput.module.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getClassName = cssModules(STYLES);\nconst KEYCODES = {\n  ENTER: 13,\n  SPACEBAR: 32\n};\nconst handleKeyEvent = (keyCode, callback) => e => {\n  if (e.keyCode === keyCode) {\n    e.preventDefault();\n    callback();\n  }\n};\nconst withEventHandler = (fn, eventHandler) => e => {\n  fn(e);\n  if (eventHandler) {\n    eventHandler(e);\n  }\n};\nconst withOpenEvents = InputComponent => {\n  class WithOpenEvents extends React.Component {\n    constructor(props) {\n      super(props);\n      this.handleTouchEnd = event => {\n        // preventDefault fixes an issue on Android and iOS in which the popover closes immediately\n        // because a touch event is registered on one of the dates.\n        // We can only run preventDefault when the input is already focused - otherwise it would never set\n        // focus on it, and when closing the modal/popover focus would return to the previously focused\n        // element (which is annoying if it's an autosuggest or another datepicker, for example).\n        if (document && event.target === document.activeElement) {\n          event.preventDefault();\n          if (this.props.onOpen) {\n            this.props.onOpen();\n          }\n        }\n      };\n      this.handleFocus = () => {\n        if (this.focusCanOpen && this.props.onOpen) {\n          this.props.onOpen();\n        }\n      };\n      this.handleBlur = () => {\n        // If the input loses focus when the target is open, it should not open on a subsequent focus.\n        // Fixes an issue with IE9.\n        if (this.props.isOpen) {\n          this.focusCanOpen = false;\n        } else {\n          this.focusCanOpen = true;\n        }\n      };\n      this.focusCanOpen = true;\n    }\n    render() {\n      const {\n        className,\n        hasTouchSupport,\n        onBlur,\n        onClick,\n        onFocus,\n        onKeyDown,\n        onKeyUp,\n        onOpen,\n        onTouchEnd,\n        ...rest\n      } = this.props;\n      delete rest.isOpen;\n      const classNames = [getClassName('bpk-input--with-open-events')];\n      if (className) {\n        classNames.push(className);\n      }\n      const eventHandlers = {\n        onClick: withEventHandler(onOpen, onClick),\n        onKeyDown: withEventHandler(handleKeyEvent(KEYCODES.ENTER, onOpen), onKeyDown),\n        onKeyUp: withEventHandler(handleKeyEvent(KEYCODES.SPACEBAR, onOpen), onKeyUp)\n      };\n      if (hasTouchSupport) {\n        // Prevents the mobile keyboard from opening (iOS / Android), while not announcing it as 'read only' to a screen reader\n        eventHandlers.readOnly = 'readOnly';\n        eventHandlers['aria-readonly'] = false;\n        eventHandlers.onTouchEnd = withEventHandler(this.handleTouchEnd, onTouchEnd);\n      }\n\n      // Needed on desktop to allow the intended behaviour of opening on focus\n      // Needed on mobile as some Android devices do not trigger onClick or onTouch when TalkBack is active but do trigger onFocus\n      eventHandlers.onFocus = withEventHandler(this.handleFocus, onFocus);\n      eventHandlers.onBlur = withEventHandler(this.handleBlur, onBlur);\n      return /*#__PURE__*/_jsxDEV(InputComponent, {\n        className: classNames.join(' '),\n        ...eventHandlers,\n        ...rest\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this);\n    }\n  }\n  WithOpenEvents.propTypes = {\n    // Custom props\n    isOpen: PropTypes.bool,\n    hasTouchSupport: PropTypes.bool,\n    onOpen: PropTypes.func,\n    // Input props\n    className: PropTypes.string,\n    onClick: PropTypes.func,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func,\n    onTouchEnd: PropTypes.func,\n    onKeyDown: PropTypes.func,\n    onKeyUp: PropTypes.func\n  };\n  WithOpenEvents.defaultProps = {\n    // Custom props\n    isOpen: false,\n    hasTouchSupport: !!(typeof window !== 'undefined' && ('ontouchstart' in window ||\n    // eslint-disable-next-line no-undef\n    window.DocumentTouch && document instanceof DocumentTouch)),\n    onOpen: null,\n    // Input props\n    className: null,\n    onClick: null,\n    onFocus: null,\n    onBlur: null,\n    onTouchEnd: null,\n    onKeyDown: null,\n    onKeyUp: null\n  };\n  WithOpenEvents.displayName = wrapDisplayName(InputComponent, 'withOpenEvents');\n  return WithOpenEvents;\n};\nexport default withOpenEvents;","map":{"version":3,"names":["React","PropTypes","cssModules","wrapDisplayName","STYLES","jsxDEV","_jsxDEV","getClassName","KEYCODES","ENTER","SPACEBAR","handleKeyEvent","keyCode","callback","e","preventDefault","withEventHandler","fn","eventHandler","withOpenEvents","InputComponent","WithOpenEvents","Component","constructor","props","handleTouchEnd","event","document","target","activeElement","onOpen","handleFocus","focusCanOpen","handleBlur","isOpen","render","className","hasTouchSupport","onBlur","onClick","onFocus","onKeyDown","onKeyUp","onTouchEnd","rest","classNames","push","eventHandlers","readOnly","join","fileName","_jsxFileName","lineNumber","columnNumber","propTypes","bool","func","string","defaultProps","window","DocumentTouch","displayName"],"sources":["/Users/pritam/Desktop/my-app/node_modules/@skyscanner/backpack-web/bpk-component-input/src/withOpenEvents.js"],"sourcesContent":["/*\n * Backpack - Skyscanner's Design System\n *\n * Copyright 2016 Skyscanner Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { cssModules, wrapDisplayName } from '../../bpk-react-utils';\n\nimport STYLES from './BpkInput.module.scss';\n\nconst getClassName = cssModules(STYLES);\n\nconst KEYCODES = {\n  ENTER: 13,\n  SPACEBAR: 32,\n};\n\nconst handleKeyEvent = (keyCode, callback) => (e) => {\n  if (e.keyCode === keyCode) {\n    e.preventDefault();\n    callback();\n  }\n};\n\nconst withEventHandler = (fn, eventHandler) => (e) => {\n  fn(e);\n  if (eventHandler) {\n    eventHandler(e);\n  }\n};\n\nconst withOpenEvents = (InputComponent) => {\n  class WithOpenEvents extends React.Component {\n    constructor(props) {\n      super(props);\n\n      this.focusCanOpen = true;\n    }\n\n    handleTouchEnd = (event) => {\n      // preventDefault fixes an issue on Android and iOS in which the popover closes immediately\n      // because a touch event is registered on one of the dates.\n      // We can only run preventDefault when the input is already focused - otherwise it would never set\n      // focus on it, and when closing the modal/popover focus would return to the previously focused\n      // element (which is annoying if it's an autosuggest or another datepicker, for example).\n      if (document && event.target === document.activeElement) {\n        event.preventDefault();\n        if (this.props.onOpen) {\n          this.props.onOpen();\n        }\n      }\n    };\n\n    handleFocus = () => {\n      if (this.focusCanOpen && this.props.onOpen) {\n        this.props.onOpen();\n      }\n    };\n\n    handleBlur = () => {\n      // If the input loses focus when the target is open, it should not open on a subsequent focus.\n      // Fixes an issue with IE9.\n      if (this.props.isOpen) {\n        this.focusCanOpen = false;\n      } else {\n        this.focusCanOpen = true;\n      }\n    };\n\n    render() {\n      const {\n        className,\n        hasTouchSupport,\n        onBlur,\n        onClick,\n        onFocus,\n        onKeyDown,\n        onKeyUp,\n        onOpen,\n        onTouchEnd,\n        ...rest\n      } = this.props;\n\n      delete rest.isOpen;\n\n      const classNames = [getClassName('bpk-input--with-open-events')];\n      if (className) {\n        classNames.push(className);\n      }\n\n      const eventHandlers = {\n        onClick: withEventHandler(onOpen, onClick),\n        onKeyDown: withEventHandler(\n          handleKeyEvent(KEYCODES.ENTER, onOpen),\n          onKeyDown,\n        ),\n        onKeyUp: withEventHandler(\n          handleKeyEvent(KEYCODES.SPACEBAR, onOpen),\n          onKeyUp,\n        ),\n      };\n\n      if (hasTouchSupport) {\n        // Prevents the mobile keyboard from opening (iOS / Android), while not announcing it as 'read only' to a screen reader\n        eventHandlers.readOnly = 'readOnly';\n        eventHandlers['aria-readonly'] = false;\n\n        eventHandlers.onTouchEnd = withEventHandler(\n          this.handleTouchEnd,\n          onTouchEnd,\n        );\n      }\n\n      // Needed on desktop to allow the intended behaviour of opening on focus\n      // Needed on mobile as some Android devices do not trigger onClick or onTouch when TalkBack is active but do trigger onFocus\n      eventHandlers.onFocus = withEventHandler(this.handleFocus, onFocus);\n      eventHandlers.onBlur = withEventHandler(this.handleBlur, onBlur);\n\n      return (\n        <InputComponent\n          className={classNames.join(' ')}\n          {...eventHandlers}\n          {...rest}\n        />\n      );\n    }\n  }\n\n  WithOpenEvents.propTypes = {\n    // Custom props\n    isOpen: PropTypes.bool,\n    hasTouchSupport: PropTypes.bool,\n    onOpen: PropTypes.func,\n    // Input props\n    className: PropTypes.string,\n    onClick: PropTypes.func,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func,\n    onTouchEnd: PropTypes.func,\n    onKeyDown: PropTypes.func,\n    onKeyUp: PropTypes.func,\n  };\n\n  WithOpenEvents.defaultProps = {\n    // Custom props\n    isOpen: false,\n    hasTouchSupport: !!(\n      typeof window !== 'undefined' &&\n      ('ontouchstart' in window ||\n        // eslint-disable-next-line no-undef\n        (window.DocumentTouch && document instanceof DocumentTouch))\n    ),\n    onOpen: null,\n    // Input props\n    className: null,\n    onClick: null,\n    onFocus: null,\n    onBlur: null,\n    onTouchEnd: null,\n    onKeyDown: null,\n    onKeyUp: null,\n  };\n\n  WithOpenEvents.displayName = wrapDisplayName(\n    InputComponent,\n    'withOpenEvents',\n  );\n\n  return WithOpenEvents;\n};\n\nexport default withOpenEvents;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}